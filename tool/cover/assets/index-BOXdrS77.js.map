{"version":3,"file":"index-BOXdrS77.js","sources":["../../src/main.ts"],"sourcesContent":["import './style.css'\n\n// 类型定义\ninterface Ratio {\n  width: number\n  height: number\n  name: string\n}\n\ninterface TextElement {\n  text: string\n  x: number\n  y: number\n  fontSize: number\n  fontFamily: string\n  color: string\n  strokeColor: string\n  strokeWidth: number\n  opacity: number\n}\n\ninterface ImageElement {\n  image: HTMLImageElement\n  x: number\n  y: number\n  width: number\n  height: number\n  scale: number\n  opacity: number\n}\n\ninterface DragOffset {\n  x: number\n  y: number\n}\n\ninterface BackgroundState {\n  offsetX: number\n  offsetY: number\n  scale: number\n}\n\ntype EditMode = 'text' | 'background'\ntype SelectedType = 'text' | 'image' | 'none'\n\n// 全局变量\nlet canvas: HTMLCanvasElement\nlet ctx: CanvasRenderingContext2D\nlet backgroundImage: HTMLImageElement | null = null\nlet currentRatio: Ratio = { width: 1600, height: 1200, name: '4:3' }\nlet textElements: TextElement[] = []\nlet imageElements: ImageElement[] = []\nlet selectedTextIndex: number = -1\nlet selectedImageIndex: number = -1\nlet selectedType: SelectedType = 'none'\nlet isDragging: boolean = false\nlet dragOffset: DragOffset = { x: 0, y: 0 }\nlet editMode: EditMode = 'text'\nlet backgroundState: BackgroundState = { offsetX: 0, offsetY: 0, scale: 1 }\nlet isDraggingBackground: boolean = false\n\n// 初始化\ndocument.addEventListener('DOMContentLoaded', function() {\n  canvas = document.getElementById('canvas') as HTMLCanvasElement\n  const context = canvas.getContext('2d')\n  if (!context) {\n    throw new Error('无法获取 canvas 2d context')\n  }\n  ctx = context\n  \n  initCanvas()\n  setupEventListeners()\n  \n  // 添加一个默认文字\n  addTextElement('你的标题')\n  render()\n})\n\n// 初始化画布\nfunction initCanvas(): void {\n  canvas.width = currentRatio.width\n  canvas.height = currentRatio.height\n}\n\n// 获取 DOM 元素的辅助函数\nfunction getElement<T extends HTMLElement>(id: string): T {\n  const element = document.getElementById(id) as T\n  if (!element) {\n    throw new Error(`Element with id '${id}' not found`)\n  }\n  return element\n}\n\n// 设置事件监听\nfunction setupEventListeners(): void {\n  // 图片上传\n  const uploadArea = getElement<HTMLDivElement>('uploadArea')\n  const imageInput = getElement<HTMLInputElement>('imageInput')\n  \n  uploadArea.addEventListener('click', () => imageInput.click())\n  imageInput.addEventListener('change', handleImageUpload)\n  \n  // 拖拽上传\n  uploadArea.addEventListener('dragover', (e: DragEvent) => {\n    e.preventDefault()\n    uploadArea.classList.add('dragover')\n  })\n  \n  uploadArea.addEventListener('dragleave', () => {\n    uploadArea.classList.remove('dragover')\n  })\n  \n  uploadArea.addEventListener('drop', (e: DragEvent) => {\n    e.preventDefault()\n    uploadArea.classList.remove('dragover')\n    const file = e.dataTransfer?.files[0]\n    if (file && file.type.startsWith('image/')) {\n      loadImage(file)\n    }\n  })\n  \n  // 比例选择\n  document.querySelectorAll('.ratio-btn').forEach(btn => {\n    btn.addEventListener('click', function(this: HTMLButtonElement) {\n      document.querySelectorAll('.ratio-btn').forEach(b => b.classList.remove('active'))\n      this.classList.add('active')\n      \n      currentRatio = {\n        width: parseInt(this.dataset.width || '1600'),\n        height: parseInt(this.dataset.height || '1200'),\n        name: this.dataset.ratio || '4:3'\n      }\n      \n      canvas.width = currentRatio.width\n      canvas.height = currentRatio.height\n      render()\n    })\n  })\n  \n  // 文字输入\n  const textInput = getElement<HTMLInputElement>('textInput')\n  textInput.addEventListener('input', () => {\n    if (selectedTextIndex >= 0 && selectedTextIndex < textElements.length) {\n      textElements[selectedTextIndex].text = textInput.value\n      render()\n    }\n  })\n  \n  // 字体选择\n  const fontSelect = getElement<HTMLSelectElement>('fontSelect')\n  fontSelect.addEventListener('change', () => {\n    if (selectedTextIndex >= 0 && selectedTextIndex < textElements.length) {\n      textElements[selectedTextIndex].fontFamily = fontSelect.value\n      render()\n    }\n  })\n  \n  // 字号\n  const fontSize = getElement<HTMLInputElement>('fontSize')\n  const fontSizeValue = getElement<HTMLSpanElement>('fontSizeValue')\n  fontSize.addEventListener('input', () => {\n    fontSizeValue.textContent = fontSize.value\n    if (selectedTextIndex >= 0 && selectedTextIndex < textElements.length) {\n      textElements[selectedTextIndex].fontSize = parseInt(fontSize.value)\n      render()\n    }\n  })\n  \n  // 文字颜色\n  const textColor = getElement<HTMLInputElement>('textColor')\n  textColor.addEventListener('input', () => {\n    if (selectedTextIndex >= 0 && selectedTextIndex < textElements.length) {\n      textElements[selectedTextIndex].color = textColor.value\n      render()\n    }\n  })\n  \n  // 描边颜色\n  const strokeColor = getElement<HTMLInputElement>('strokeColor')\n  strokeColor.addEventListener('input', () => {\n    if (selectedTextIndex >= 0 && selectedTextIndex < textElements.length) {\n      textElements[selectedTextIndex].strokeColor = strokeColor.value\n      render()\n    }\n  })\n  \n  // 描边宽度\n  const strokeWidth = getElement<HTMLInputElement>('strokeWidth')\n  const strokeWidthValue = getElement<HTMLSpanElement>('strokeWidthValue')\n  strokeWidth.addEventListener('input', () => {\n    strokeWidthValue.textContent = strokeWidth.value\n    if (selectedTextIndex >= 0 && selectedTextIndex < textElements.length) {\n      textElements[selectedTextIndex].strokeWidth = parseInt(strokeWidth.value)\n      render()\n    }\n  })\n  \n  // 文字不透明度\n  const textOpacity = getElement<HTMLInputElement>('textOpacity')\n  const textOpacityValue = getElement<HTMLSpanElement>('textOpacityValue')\n  textOpacity.addEventListener('input', () => {\n    textOpacityValue.textContent = textOpacity.value\n    if (selectedTextIndex >= 0 && selectedTextIndex < textElements.length) {\n      textElements[selectedTextIndex].opacity = parseInt(textOpacity.value) / 100\n      render()\n    }\n  })\n  \n  // 背景模糊\n  const bgBlur = getElement<HTMLInputElement>('bgBlur')\n  const blurValue = getElement<HTMLSpanElement>('blurValue')\n  bgBlur.addEventListener('input', () => {\n    blurValue.textContent = bgBlur.value\n    render()\n  })\n  \n  // 背景亮度\n  const bgBrightness = getElement<HTMLInputElement>('bgBrightness')\n  const brightnessValue = getElement<HTMLSpanElement>('brightnessValue')\n  bgBrightness.addEventListener('input', () => {\n    brightnessValue.textContent = bgBrightness.value\n    render()\n  })\n  \n  // 模式切换\n  const textModeBtn = getElement<HTMLButtonElement>('textModeBtn')\n  const bgModeBtn = getElement<HTMLButtonElement>('bgModeBtn')\n  \n  textModeBtn.addEventListener('click', () => {\n    editMode = 'text'\n    textModeBtn.classList.add('active')\n    bgModeBtn.classList.remove('active')\n    canvas.style.cursor = 'move'\n  })\n  \n  bgModeBtn.addEventListener('click', () => {\n    editMode = 'background'\n    bgModeBtn.classList.add('active')\n    textModeBtn.classList.remove('active')\n    canvas.style.cursor = 'grab'\n  })\n  \n  // 背景缩放\n  const bgScale = getElement<HTMLInputElement>('bgScale')\n  const bgScaleValue = getElement<HTMLSpanElement>('bgScaleValue')\n  bgScale.addEventListener('input', () => {\n    bgScaleValue.textContent = bgScale.value\n    backgroundState.scale = parseInt(bgScale.value) / 100\n    render()\n  })\n  \n  // 重置背景位置\n  getElement<HTMLButtonElement>('resetBgBtn').addEventListener('click', () => {\n    backgroundState.offsetX = 0\n    backgroundState.offsetY = 0\n    backgroundState.scale = 1\n    bgScale.value = '100'\n    bgScaleValue.textContent = '100'\n    render()\n  })\n  \n  // 添加图片按钮\n  const imageElementInput = getElement<HTMLInputElement>('imageElementInput')\n  getElement<HTMLButtonElement>('addImageBtn').addEventListener('click', () => {\n    imageElementInput.click()\n  })\n  \n  // 图片上传\n  imageElementInput.addEventListener('change', (e) => {\n    const target = e.target as HTMLInputElement\n    const file = target.files?.[0]\n    if (file) {\n      loadImageElement(file)\n      // 重置 input 以便可以再次上传同一个文件\n      target.value = ''\n    }\n  })\n  \n  // 图片缩放\n  const imageScale = getElement<HTMLInputElement>('imageScale')\n  const imageScaleValue = getElement<HTMLSpanElement>('imageScaleValue')\n  imageScale.addEventListener('input', () => {\n    imageScaleValue.textContent = imageScale.value\n    if (selectedImageIndex >= 0 && selectedImageIndex < imageElements.length) {\n      imageElements[selectedImageIndex].scale = parseInt(imageScale.value) / 100\n      render()\n    }\n  })\n  \n  // 图片不透明度\n  const imageOpacity = getElement<HTMLInputElement>('imageOpacity')\n  const imageOpacityValue = getElement<HTMLSpanElement>('imageOpacityValue')\n  imageOpacity.addEventListener('input', () => {\n    imageOpacityValue.textContent = imageOpacity.value\n    if (selectedImageIndex >= 0 && selectedImageIndex < imageElements.length) {\n      imageElements[selectedImageIndex].opacity = parseInt(imageOpacity.value) / 100\n      render()\n    }\n  })\n  \n  // 删除图片按钮\n  getElement<HTMLButtonElement>('removeImageBtn').addEventListener('click', () => {\n    if (selectedImageIndex >= 0 && selectedImageIndex < imageElements.length) {\n      imageElements.splice(selectedImageIndex, 1)\n      selectedImageIndex = -1\n      selectedType = 'none'\n      getElement<HTMLDivElement>('imageControlsPanel').style.display = 'none'\n      render()\n    }\n  })\n  \n  // 添加文字按钮\n  getElement<HTMLButtonElement>('addTextBtn').addEventListener('click', () => {\n    const text = getElement<HTMLInputElement>('textInput').value || '新文字'\n    addTextElement(text)\n    render()\n  })\n  \n  // 删除文字按钮\n  getElement<HTMLButtonElement>('removeTextBtn').addEventListener('click', () => {\n    if (selectedTextIndex >= 0 && selectedTextIndex < textElements.length) {\n      textElements.splice(selectedTextIndex, 1)\n      selectedTextIndex = -1\n      render()\n    }\n  })\n  \n  // 下载按钮\n  getElement<HTMLButtonElement>('downloadBtn').addEventListener('click', downloadImage)\n  \n  // 画布鼠标事件\n  canvas.addEventListener('mousedown', handleMouseDown)\n  canvas.addEventListener('mousemove', handleMouseMove)\n  canvas.addEventListener('mouseup', handleMouseUp)\n  canvas.addEventListener('mouseleave', handleMouseUp)\n}\n\n// 处理图片上传\nfunction handleImageUpload(e: Event): void {\n  const target = e.target as HTMLInputElement\n  const file = target.files?.[0]\n  if (file) {\n    loadImage(file)\n  }\n}\n\n// 加载图片\nfunction loadImage(file: File): void {\n  const reader = new FileReader()\n  reader.onload = function(e: ProgressEvent<FileReader>) {\n    const img = new Image()\n    img.onload = function() {\n      backgroundImage = img\n      // 重置背景状态\n      backgroundState.offsetX = 0\n      backgroundState.offsetY = 0\n      backgroundState.scale = 1\n      // 重置控制UI\n      getElement<HTMLInputElement>('bgScale').value = '100'\n      getElement<HTMLSpanElement>('bgScaleValue').textContent = '100'\n      render()\n    }\n    img.src = e.target?.result as string\n  }\n  reader.readAsDataURL(file)\n}\n\n// 加载图片元素\nfunction loadImageElement(file: File): void {\n  const reader = new FileReader()\n  reader.onload = function(e: ProgressEvent<FileReader>) {\n    const img = new Image()\n    img.onload = function() {\n      // 计算合适的初始大小（不超过画布的1/3）\n      const maxSize = Math.min(canvas.width, canvas.height) / 3\n      const scale = Math.min(maxSize / img.width, maxSize / img.height, 1)\n      \n      const element: ImageElement = {\n        image: img,\n        x: canvas.width / 2,\n        y: canvas.height / 2,\n        width: img.width,\n        height: img.height,\n        scale: scale,\n        opacity: 1\n      }\n      imageElements.push(element)\n      selectedImageIndex = imageElements.length - 1\n      selectedType = 'image'\n      selectedTextIndex = -1\n      updateImageControlsFromSelected()\n      render()\n    }\n    img.src = e.target?.result as string\n  }\n  reader.readAsDataURL(file)\n}\n\n// 添加文字元素\nfunction addTextElement(text: string): void {\n  const element: TextElement = {\n    text: text,\n    x: canvas.width / 2,\n    y: canvas.height / 2,\n    fontSize: parseInt(getElement<HTMLInputElement>('fontSize').value),\n    fontFamily: getElement<HTMLSelectElement>('fontSelect').value,\n    color: getElement<HTMLInputElement>('textColor').value,\n    strokeColor: getElement<HTMLInputElement>('strokeColor').value,\n    strokeWidth: parseInt(getElement<HTMLInputElement>('strokeWidth').value),\n    opacity: parseInt(getElement<HTMLInputElement>('textOpacity').value) / 100\n  }\n  textElements.push(element)\n  selectedTextIndex = textElements.length - 1\n  selectedImageIndex = -1\n  selectedType = 'text'\n  getElement<HTMLDivElement>('imageControlsPanel').style.display = 'none'\n  updateControlsFromSelected()\n}\n\n// 更新控制面板显示选中的文字属性\nfunction updateControlsFromSelected(): void {\n  if (selectedTextIndex >= 0 && selectedTextIndex < textElements.length) {\n    const element = textElements[selectedTextIndex]\n    getElement<HTMLInputElement>('textInput').value = element.text\n    getElement<HTMLInputElement>('fontSize').value = element.fontSize.toString()\n    getElement<HTMLSpanElement>('fontSizeValue').textContent = element.fontSize.toString()\n    getElement<HTMLSelectElement>('fontSelect').value = element.fontFamily\n    getElement<HTMLInputElement>('textColor').value = element.color\n    getElement<HTMLInputElement>('strokeColor').value = element.strokeColor\n    getElement<HTMLInputElement>('strokeWidth').value = element.strokeWidth.toString()\n    getElement<HTMLSpanElement>('strokeWidthValue').textContent = element.strokeWidth.toString()\n    const opacityPercent = Math.round(element.opacity * 100)\n    getElement<HTMLInputElement>('textOpacity').value = opacityPercent.toString()\n    getElement<HTMLSpanElement>('textOpacityValue').textContent = opacityPercent.toString()\n  }\n}\n\n// 更新控制面板显示选中的图片属性\nfunction updateImageControlsFromSelected(): void {\n  const panel = getElement<HTMLDivElement>('imageControlsPanel')\n  if (selectedImageIndex >= 0 && selectedImageIndex < imageElements.length) {\n    const element = imageElements[selectedImageIndex]\n    panel.style.display = 'block'\n    const scalePercent = Math.round(element.scale * 100)\n    getElement<HTMLInputElement>('imageScale').value = scalePercent.toString()\n    getElement<HTMLSpanElement>('imageScaleValue').textContent = scalePercent.toString()\n    const opacityPercent = Math.round(element.opacity * 100)\n    getElement<HTMLInputElement>('imageOpacity').value = opacityPercent.toString()\n    getElement<HTMLSpanElement>('imageOpacityValue').textContent = opacityPercent.toString()\n  } else {\n    panel.style.display = 'none'\n  }\n}\n\n// 鼠标按下\nfunction handleMouseDown(e: MouseEvent): void {\n  const rect = canvas.getBoundingClientRect()\n  const scaleX = canvas.width / rect.width\n  const scaleY = canvas.height / rect.height\n  const x = (e.clientX - rect.left) * scaleX\n  const y = (e.clientY - rect.top) * scaleY\n  \n  if (editMode === 'background') {\n    // 背景调整模式\n    if (backgroundImage) {\n      isDraggingBackground = true\n      dragOffset.x = x - backgroundState.offsetX\n      dragOffset.y = y - backgroundState.offsetY\n      canvas.style.cursor = 'grabbing'\n    }\n  } else {\n    // 文字编辑模式 - 先检查图片元素（从后往前，后添加的在上层）\n    let hitElement = false\n    \n    for (let i = imageElements.length - 1; i >= 0; i--) {\n      const element = imageElements[i]\n      const halfWidth = (element.width * element.scale) / 2\n      const halfHeight = (element.height * element.scale) / 2\n      \n      if (x >= element.x - halfWidth && x <= element.x + halfWidth &&\n          y >= element.y - halfHeight && y <= element.y + halfHeight) {\n        selectedImageIndex = i\n        selectedTextIndex = -1\n        selectedType = 'image'\n        isDragging = true\n        dragOffset.x = x - element.x\n        dragOffset.y = y - element.y\n        updateImageControlsFromSelected()\n        render()\n        hitElement = true\n        break\n      }\n    }\n    \n    // 如果没有点击图片，再检查文字\n    if (!hitElement) {\n      for (let i = textElements.length - 1; i >= 0; i--) {\n        const element = textElements[i]\n        ctx.font = `${element.fontSize}px ${element.fontFamily}`\n        const metrics = ctx.measureText(element.text)\n        const textWidth = metrics.width\n        const textHeight = element.fontSize\n        \n        if (x >= element.x - textWidth / 2 && x <= element.x + textWidth / 2 &&\n            y >= element.y - textHeight / 2 && y <= element.y + textHeight / 2) {\n          selectedTextIndex = i\n          selectedImageIndex = -1\n          selectedType = 'text'\n          isDragging = true\n          dragOffset.x = x - element.x\n          dragOffset.y = y - element.y\n          updateControlsFromSelected()\n          getElement<HTMLDivElement>('imageControlsPanel').style.display = 'none'\n          render()\n          hitElement = true\n          break\n        }\n      }\n    }\n  }\n}\n\n// 鼠标移动\nfunction handleMouseMove(e: MouseEvent): void {\n  const rect = canvas.getBoundingClientRect()\n  const scaleX = canvas.width / rect.width\n  const scaleY = canvas.height / rect.height\n  const x = (e.clientX - rect.left) * scaleX\n  const y = (e.clientY - rect.top) * scaleY\n  \n  if (isDraggingBackground) {\n    // 拖动背景\n    backgroundState.offsetX = x - dragOffset.x\n    backgroundState.offsetY = y - dragOffset.y\n    render()\n  } else if (isDragging) {\n    if (selectedType === 'image' && selectedImageIndex >= 0) {\n      // 拖动图片\n      imageElements[selectedImageIndex].x = x - dragOffset.x\n      imageElements[selectedImageIndex].y = y - dragOffset.y\n      render()\n    } else if (selectedType === 'text' && selectedTextIndex >= 0) {\n      // 拖动文字\n      textElements[selectedTextIndex].x = x - dragOffset.x\n      textElements[selectedTextIndex].y = y - dragOffset.y\n      render()\n    }\n  }\n}\n\n// 鼠标释放\nfunction handleMouseUp(): void {\n  isDragging = false\n  isDraggingBackground = false\n  if (editMode === 'background' && backgroundImage) {\n    canvas.style.cursor = 'grab'\n  }\n}\n\n// 渲染画布\nfunction render(): void {\n  // 清空画布\n  ctx.clearRect(0, 0, canvas.width, canvas.height)\n  \n  // 应用滤镜\n  const blur = parseInt(getElement<HTMLInputElement>('bgBlur').value)\n  const brightness = parseInt(getElement<HTMLInputElement>('bgBrightness').value)\n  \n  if (blur > 0) {\n    ctx.filter = `blur(${blur}px) brightness(${brightness}%)`\n  } else {\n    ctx.filter = `brightness(${brightness}%)`\n  }\n  \n  // 绘制背景\n  if (backgroundImage) {\n    // 计算基础缩放（填充画布）\n    const baseScale = Math.max(canvas.width / backgroundImage.width, canvas.height / backgroundImage.height)\n    // 应用用户自定义缩放\n    const finalScale = baseScale * backgroundState.scale\n    \n    // 计算居中位置\n    const centerX = (canvas.width - backgroundImage.width * finalScale) / 2\n    const centerY = (canvas.height - backgroundImage.height * finalScale) / 2\n    \n    // 应用用户偏移\n    const x = centerX + backgroundState.offsetX\n    const y = centerY + backgroundState.offsetY\n    \n    ctx.drawImage(backgroundImage, x, y, backgroundImage.width * finalScale, backgroundImage.height * finalScale)\n  } else {\n    // 默认渐变背景\n    const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height)\n    gradient.addColorStop(0, '#667eea')\n    gradient.addColorStop(1, '#764ba2')\n    ctx.fillStyle = gradient\n    ctx.fillRect(0, 0, canvas.width, canvas.height)\n  }\n  \n  // 重置滤镜\n  ctx.filter = 'none'\n  \n  // 绘制所有图片元素\n  imageElements.forEach((element, index) => {\n    ctx.save()\n    ctx.globalAlpha = element.opacity\n    \n    const width = element.width * element.scale\n    const height = element.height * element.scale\n    const x = element.x - width / 2\n    const y = element.y - height / 2\n    \n    ctx.drawImage(element.image, x, y, width, height)\n    \n    // 如果是选中的图片，绘制边框\n    if (index === selectedImageIndex && selectedType === 'image') {\n      ctx.strokeStyle = '#667eea'\n      ctx.lineWidth = 3\n      ctx.setLineDash([10, 5])\n      ctx.strokeRect(x - 5, y - 5, width + 10, height + 10)\n      ctx.setLineDash([])\n    }\n    \n    ctx.restore()\n  })\n  \n  // 绘制所有文字\n  textElements.forEach((element, index) => {\n    ctx.save()\n    ctx.globalAlpha = element.opacity\n    ctx.font = `bold ${element.fontSize}px ${element.fontFamily}`\n    ctx.textAlign = 'center'\n    ctx.textBaseline = 'middle'\n    \n    // 绘制描边\n    if (element.strokeWidth > 0) {\n      ctx.strokeStyle = element.strokeColor\n      ctx.lineWidth = element.strokeWidth\n      ctx.strokeText(element.text, element.x, element.y)\n    }\n    \n    // 绘制文字\n    ctx.fillStyle = element.color\n    ctx.fillText(element.text, element.x, element.y)\n    \n    // 如果是选中的文字，绘制边框\n    if (index === selectedTextIndex && selectedType === 'text') {\n      const metrics = ctx.measureText(element.text)\n      const textWidth = metrics.width\n      const textHeight = element.fontSize\n      \n      ctx.strokeStyle = '#667eea'\n      ctx.lineWidth = 3\n      ctx.setLineDash([10, 5])\n      ctx.strokeRect(\n        element.x - textWidth / 2 - 10,\n        element.y - textHeight / 2 - 10,\n        textWidth + 20,\n        textHeight + 20\n      )\n      ctx.setLineDash([])\n    }\n    \n    ctx.restore()\n  })\n}\n\n// 下载图片\nfunction downloadImage(): void {\n  // 临时取消选中效果\n  const tempSelectedText = selectedTextIndex\n  const tempSelectedImage = selectedImageIndex\n  const tempSelectedType = selectedType\n  selectedTextIndex = -1\n  selectedImageIndex = -1\n  selectedType = 'none'\n  render()\n  \n  // 生成下载\n  const link = document.createElement('a')\n  link.download = `封面_${currentRatio.name}_${Date.now()}.png`\n  link.href = canvas.toDataURL('image/png')\n  link.click()\n  \n  // 恢复选中效果\n  selectedTextIndex = tempSelectedText\n  selectedImageIndex = tempSelectedImage\n  selectedType = tempSelectedType\n  render()\n}\n\n"],"names":["canvas","ctx","backgroundImage","currentRatio","textElements","imageElements","selectedTextIndex","selectedImageIndex","selectedType","isDragging","dragOffset","editMode","backgroundState","isDraggingBackground","context","initCanvas","setupEventListeners","addTextElement","render","getElement","id","element","uploadArea","imageInput","handleImageUpload","e","file","_a","loadImage","btn","b","textInput","fontSelect","fontSize","fontSizeValue","textColor","strokeColor","strokeWidth","strokeWidthValue","textOpacity","textOpacityValue","bgBlur","blurValue","bgBrightness","brightnessValue","textModeBtn","bgModeBtn","bgScale","bgScaleValue","imageElementInput","target","loadImageElement","imageScale","imageScaleValue","imageOpacity","imageOpacityValue","text","downloadImage","handleMouseDown","handleMouseMove","handleMouseUp","reader","img","maxSize","scale","updateImageControlsFromSelected","updateControlsFromSelected","opacityPercent","panel","scalePercent","rect","scaleX","scaleY","x","y","hitElement","i","halfWidth","halfHeight","textWidth","textHeight","blur","brightness","finalScale","centerX","centerY","gradient","index","width","height","tempSelectedText","tempSelectedImage","tempSelectedType","link"],"mappings":"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"}