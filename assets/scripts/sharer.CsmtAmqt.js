import{u as e,b as c,D as h,B as m}from"./luxon.BBr4EXs1.js";const u=({children:r,...t})=>{const n=`spinner__layer spinner__layer--${t.index}`;return e("div",{className:n,children:[e("div",{className:"spinner__circle-clipper spinner__left",children:e("div",{className:"spinner__circle"})}),e("div",{className:"spinner__gap-patch",children:e("div",{className:"spinner__circle"})}),e("div",{className:"spinner__circle-clipper spinner__right",children:e("div",{className:"spinner__circle"})})]})},_=()=>{const r=[];for(let t=1;t<=4;t++)r.push(e(u,{index:t},t));return e("div",{className:"spinner",children:e("div",{className:"spinner__layercontainer",children:r})})};class p extends c{constructor(){super(),this.handleSubmit=this.handleSubmit.bind(this)}handleSubmit(t){t.preventDefault(),this.props.onSubmit()}render(t){return e("form",{className:"form",onSubmit:this.handleSubmit,"accept-charset":"UTF-8",children:[e("div",{class:"form__body",children:[e("ul",{className:"form__fields",children:[e("li",{className:"form__field",children:[e("label",{className:"form__label",for:"sharing-title",children:"Title"}),e("input",{className:"form__input",type:"text",id:"sharing-title",name:"title",value:t.title,onInput:t.onUpdate})]}),e("li",{className:"form__field",children:[e("label",{className:"form__label",for:"sharing-url",children:"URL"}),e("input",{className:"form__input",type:"url",id:"sharing-url",name:"url",value:t.url,onInput:t.onUpdate,required:!0})]}),e("li",{className:"form__field form__field--full",children:[e("label",{className:"form__label",for:"sharing-body",children:"Note Body"}),e("textarea",{className:"form__input",id:"sharing-body",maxlength:"200",name:"body",value:t.body,onInput:t.onUpdate})]}),e("li",{className:"form__field",children:[e("label",{className:"form__label",for:"sharing-via",children:"Via"}),e("input",{className:"form__input",type:"text",id:"sharing-via",name:"via",value:t.via,onInput:t.onUpdate})]}),e("li",{className:"form__field",children:e("label",{className:"form__label",for:"sharing-syndicate",children:[e("input",{className:"form__checkbox",type:"checkbox",id:"sharing-syndicate",name:"syndicate",checked:t.syndicate,onChange:t.onUpdate})," Syndicate to Twitter"]})})]}),e("details",{className:"form__settings",children:[e("summary",{children:["⚙️",e("span",{className:"sr-only",children:"Config"})]}),e("ul",{className:"form__fields",children:[e("li",{children:[e("label",{className:"form__label",for:"sharing-username",children:"User Name"}),e("input",{className:"form__input",type:"text",id:"sharing-username",name:"username",autoComplete:"username",value:t.username,onInput:t.onUpdate})]}),e("li",{children:[e("label",{className:"form__label",for:"sharing-token",children:"Access Token"}),e("input",{className:"form__input",type:"password",id:"sharing-token",name:"token",autoComplete:"current-password",value:t.token,onInput:t.onUpdate})]})]})]}),e("div",{className:"sr-only",style:{visibility:"hidden"},"aria-hidden":"true",children:[e("label",{className:"form__label",for:"sharing-hp",children:"Don’t fill this out if you're human:"}),e("input",{type:"text",name:"_honeyp0t",id:"sharing-hp",tabindex:"-1",value:t._honeyp0t,onInput:t.onUpdate})]})]}),e("div",{className:"form__actions",children:t.isLoading?e(_,{}):e("button",{type:"submit",className:"btn btn--primary",children:"Publish Note"})})]})}}class f extends c{previewContent(){const{title:t,url:n,via:s,body:a}=this.props,i=[],o=l=>l.charAt(0)==="@"?e("a",{href:`https://twitter.com/${l.substring(1)}`,children:l}):l,d=s.trim().length?e("span",{children:[" (via ",o(s),")"]}):null;return t.trim().length&&i.push(e("h2",{className:"note__title",children:t},"n-title")),(a||s)&&i.push(e("p",{children:[a,d]},"n-body")),n&&i.push(e("a",{href:n,children:n},"n-url")),i}renderMeta(){const t=new Date,n=h.fromJSDate(t).toFormat("dd LLL yyyy - HH:mm");return e("div",{className:"note__meta",children:[e("p",{className:"note__author",children:e("span",{className:"note__author__link",children:[e("img",{className:"note__author__photo",src:assetUrls.avatar}),e("strong",{className:"note__author__name",children:"@mxbck"})]})}),e("span",{className:"note__meta__divider","aria-hidden":"true",children:"⋅"}),e("time",{className:"note__date",children:n}),e("div",{className:"note__tags",children:e("span",{className:"note__tag",children:"link"})})]})}render(t){return e("div",{className:"note",children:e("div",{className:"note__main",children:[this.renderMeta(),e("div",{className:"note__content",style:{minHeight:100},children:e("div",{className:"markdown",children:this.previewContent()})})]})})}}const N=({children:r,...t})=>{const{name:n}=t;return e("svg",{className:`icon icon--${n}`,role:"img","aria-hidden":"true",width:24,height:24,children:e("use",{xmlnsXlink:"http://www.w3.org/1999/xlink",xlinkHref:`/assets/icons/icons.sprite.svg#icon-${n}`})})},y=({children:r,...t})=>{const{success:n,message:s}=t,a=n?"alert--success":"alert--error",i=n?"check":"warning";return e("div",{className:`alert ${a}`,children:[e(N,{name:i}),s]})};class g extends c{constructor(){super(),this.state={_honeyp0t:"",title:"",url:"",via:"",body:"",username:"",token:"",syndicate:!1,isLoading:!1,status:void 0},this.update=this.update.bind(this),this.post=this.post.bind(this),this.handleResponse=this.handleResponse.bind(this)}componentDidMount(){this.getInitialValues()}handleResponse(t){t.ok?this.setState({isLoading:!1,status:{success:!0,message:"Note published!"}}):t.text().then(n=>{this.setState({isLoading:!1,status:{success:!1,message:`${t.status} ${n}`}})})}getInitialValues(){const t=new URLSearchParams(window.location.search),n={};for(let s of t){const[a,i]=s;this.state.hasOwnProperty(a)&&(n[a]=i)}if(t.has("text")){const s=t.get("text");s.includes("http")&&!n.url&&(n.url=s)}this.setState(Object.assign({},n))}update(t){const{name:n,value:s,type:a}=t.target,i=a==="checkbox"?!this.state[n]:s;this.setState({[n]:i})}post(){const{action:t}=this.props,{_honeyp0t:n,isLoading:s,...a}=this.state;n.length||(this.setState({isLoading:!0,status:void 0}),fetch(t,{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).then(this.handleResponse).catch(i=>{console.error(i)}))}render(t,n){const{status:s,...a}=n;return e("div",{className:"sharer",children:[e(f,{...a}),s?e(y,{...s}):e(p,{...a,onSubmit:i=>this.post(i),onUpdate:this.update})]})}}const b="/.netlify/functions/share";m(e(g,{action:b}),document.getElementById("sharer"));
